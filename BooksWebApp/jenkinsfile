pipeline {
   agent any
   tools {nodejs "NodeJS"}
    
    stages {
        stage('Install') {
            steps {
                sh 'cd BooksWebApp && npm install'
            }
        }
        stage('Build') {
            steps {
                sh 'cd BooksWebApp && npm build'
            }
        }
        stage('Test') {
            steps {
                //sh 'cd BooksWebApp && npm test'
                  sh 'echo "test"'
            }
        }        
        stage('Deploy test playbook') {
            steps {
            node('ubuntu'){
            
                sh script:'''
                   #!/bin/bash
                   echo "This is start $(pwd)"
                   cd /home/arafa/Desktop/AnsibleDeployment
                   echo "This is $(pwd)"
                   ansible-playbook testDeployment.yml
                  '''
                  
            }
            }
        }             
    }
}
