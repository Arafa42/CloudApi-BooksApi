pipeline {
   agent any
   tools {nodejs "NodeJS"}
    
    stages {
        stage('Install') {
            steps {
                sh 'cd BooksWebApp && npm install'
            }
        }
        stage('Build') {
            steps {
                sh 'cd BooksWebApp && npm build'
            }
        }
        stage('Test') {
            steps {
                //sh 'cd BooksWebApp && npm test'
                  sh 'echo "test"'
            }
        }        
        stage('Deploy playbook') {
            steps {
            node('ubuntu'){
                sh 'cd /home/arafa/Desktop/AnsibleDeployment'
                sh 'ansible-playbook testDeployment.yml --ask-become-pass'
            }
            }
        }             
    }
}
